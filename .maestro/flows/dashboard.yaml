# Dashboard Tests
# Tests dashboard functionality after login
# Requires: TEST_EMAIL and TEST_PASSWORD env vars

appId: ${APP_URL:-http://localhost:5173}
env:
  TEST_EMAIL: ${TEST_EMAIL}
  TEST_PASSWORD: ${TEST_PASSWORD}
---

# Skip if no test credentials provided
- runFlow:
    when:
      visible: "Login"
    commands:
      # Navigate to login
      - tapOn: "Login"
      
      # Enter credentials
      - tapOn:
          id: "email"
      - inputText: ${TEST_EMAIL}
      - tapOn:
          id: "password"
      - inputText: ${TEST_PASSWORD}
      - tapOn: "Sign in"
      
      # Wait for dashboard to load
      - extendedWaitUntil:
          visible: "Dashboard"
          timeout: 10000

# Verify dashboard elements
- assertVisible: "Dashboard"

# Check sidebar navigation
- assertVisible: "Posts"
- assertVisible: "Scheduler"
- assertVisible: "Analytics"

# Test navigation to Posts
- tapOn: "Posts"
- assertVisible: "Create"

# Test navigation to Scheduler
- tapOn: "Scheduler"
- assertVisible:
    text: ".*calendar.*"
    optional: true
